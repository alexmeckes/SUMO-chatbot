{
  "slug": "configuring-networks-disable-dns-over-https",
  "title": "Configure networks to disable DNS over HTTPS",
  "summary": "DNS over HTTPS (DoH) is a feature that everyone should use to enhance privacy but in a few circumstances, it can be undesirable. Learn more.",
  "url": "https://support.mozilla.org/en-US/kb/configuring-networks-disable-dns-over-https",
  "html": "<p>At Mozilla, we believe that <a href=\"/en-US/kb/firefox-dns-over-https\">DNS over HTTPS (DoH)</a> is a feature that everyone should use to enhance their privacy. By encrypting these DNS requests, DoH hides your browsing data from anyone on the network path between you and your nameserver. For instance, using standard DNS queries on a public network can potentially disclose every website you visit to other users on the network as well as the network operator. While we would like to encourage everyone to use DoH, we also recognize that there are a few circumstances in which DoH can be undesirable, namely:\n</p>\n<ul><li>Networks that have implemented some sort of filtering via the default DNS resolver. This can be used to implement parental controls or to block access to malicious websites.\n</li><li>Networks that respond to names that are private, and/or that provide different responses than are provided publicly. For example, a company may only expose the address of an application used by employees on their internal network.\n</li></ul>\n<p>Networks can signal to Firefox that there are special features such as these in place that would be disabled if DoH were used for domain name resolution. Checking for this signaling will be implemented in Firefox when DoH is enabled by default for users. This will first happen for users in the United States in the Fall of 2019, in Canada in the Summer of 2021 and in Russia and Ukraine in March 2022. If a user has chosen to manually enable DoH, the signal from the network will be ignored and the user’s preference will be honored.\n</p><p>Network administrators may configure their networks to treat DNS requests for a <a href=\"/en-US/kb/canary-domain-use-application-dnsnet\">canary domain</a> differently, to signal that their local DNS resolver implements special features that make the network unsuitable for DoH.\n</p><p>In addition to the canary domain signal described above, Firefox will perform some checks for network features that are incompatible with DoH before enabling it for a user. These checks will be performed at browser startup, and each time the browser detects that it has moved to a different network, such as when a laptop is used at home, work, and a coffee shop. When any of these checks indicates a potential issue, Firefox will disable DoH for the remainder of the network session, unless the user has enabled the “DoH always” preference as mentioned above.\nThe additional checks that will be performed for content filtering are:\n</p>\n<ul><li>Resolve canary domains of certain known DNS providers to detect content filtering.\n</li><li>Resolve the “safe-search” variants of google.com and youtube.com to determine if the network redirects to them.\n</li><li>On Windows and macOS, detect parental controls enabled in the operating system.\n</li></ul>\n<p>The additional checks that will be performed for private “enterprise” networks are:\n</p>\n<ul><li>Is the Firefox <span class=\"pref\">security.enterprise_roots.enabled</span> preference set to <span class=\"pref\">true</span>?\n</li><li>Is any <a href=\"/en-US/kb/enforcing-policies-firefox-enterprise\">enterprise policy</a> configured?\n</li></ul>",
  "text": "At Mozilla, we believe that DNS over HTTPS (DoH) is a feature that everyone should use to enhance their privacy. By encrypting these DNS requests, DoH hides your browsing data from anyone on the network path between you and your nameserver. For instance, using standard DNS queries on a public network can potentially disclose every website you visit to other users on the network as well as the network operator. While we would like to encourage everyone to use DoH, we also recognize that there are a few circumstances in which DoH can be undesirable, namely: Networks that have implemented some sort of filtering via the default DNS resolver. This can be used to implement parental controls or to block access to malicious websites. Networks that respond to names that are private, and/or that provide different responses than are provided publicly. For example, a company may only expose the address of an application used by employees on their internal network. Networks can signal to Firefox that there are special features such as these in place that would be disabled if DoH were used for domain name resolution. Checking for this signaling will be implemented in Firefox when DoH is enabled by default for users. This will first happen for users in the United States in the Fall of 2019, in Canada in the Summer of 2021 and in Russia and Ukraine in March 2022. If a user has chosen to manually enable DoH, the signal from the network will be ignored and the user’s preference will be honored. Network administrators may configure their networks to treat DNS requests for a canary domain differently, to signal that their local DNS resolver implements special features that make the network unsuitable for DoH. In addition to the canary domain signal described above, Firefox will perform some checks for network features that are incompatible with DoH before enabling it for a user. These checks will be performed at browser startup, and each time the browser detects that it has moved to a different network, such as when a laptop is used at home, work, and a coffee shop. When any of these checks indicates a potential issue, Firefox will disable DoH for the remainder of the network session, unless the user has enabled the “DoH always” preference as mentioned above. The additional checks that will be performed for content filtering are: Resolve canary domains of certain known DNS providers to detect content filtering. Resolve the “safe-search” variants of google.com and youtube.com to determine if the network redirects to them. On Windows and macOS, detect parental controls enabled in the operating system. The additional checks that will be performed for private “enterprise” networks are: Is the Firefox security.enterprise_roots.enabled preference set to true ? Is any enterprise policy configured?",
  "products": [
    "firefox"
  ],
  "topics": [
    "advanced-and-experimental-features"
  ],
  "locale": "en-US",
  "metadata": {
    "html_bytes": 3173,
    "text_bytes": 2821,
    "word_count": 463,
    "downloaded_at": "2025-08-26T10:51:59.740917"
  }
}